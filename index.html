<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>S.O.T Bible Quiz</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --orange:#ff7a18;
  --gold:#ffb347;
  --dark:#020617;
}
*{box-sizing:border-box;font-family:system-ui,sans-serif}
body{margin:0;background:#0f172a;color:#fff}

/* ===== LOADING ===== */
#loading{position:fixed;inset:0;background:#020617;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999}
#loadLogo{width:90px;height:90px;border-radius:50%;border:5px solid var(--orange);animation:spin 2s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
#loadText{margin:12px}
#bar{width:260px;height:12px;background:#1f2937;border-radius:20px;overflow:hidden}
#fill{height:100%;width:1%;background:linear-gradient(90deg,var(--orange),var(--gold))}

/* ===== HEADER ===== */
header{display:flex;justify-content:space-between;align-items:center;padding:14px 20px;background:#020617}
header h1{animation:blink 1.3s infinite}
@keyframes blink{50%{opacity:.4}}
header img{width:45px;height:45px;border-radius:50%}

/* ===== SECTIONS ===== */
section{max-width:1000px;margin:auto;padding:25px}
.hero{text-align:center}
.hero h2{color:var(--gold)}
.hero p{line-height:1.8;color:#d1d5db}

/* ===== BUTTON ===== */
.btn{
  background:linear-gradient(90deg,var(--orange),var(--gold));
  border:none;padding:14px 26px;border-radius:30px;
  font-weight:bold;cursor:pointer;
  box-shadow:0 0 25px rgba(255,122,24,.6);
}

/* ===== GALLERY ===== */
.gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px}
.gallery img{width:100%;border-radius:14px}

/* ===== MODAL ===== */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;justify-content:center;align-items:center}
.card{background:#020617;padding:22px;border-radius:16px;width:95%;max-width:520px}
input,select{width:100%;padding:12px;margin-top:10px;border-radius:10px;border:none}

/* ===== QUIZ ===== */
#quiz{display:none}
.option{background:#1f2937;padding:12px;border-radius:10px;margin-top:10px;cursor:pointer}
.option:hover{background:#374151}
.progress{height:10px;background:#1f2937;border-radius:10px;overflow:hidden;margin:15px 0}
.progress div{height:100%;width:0;background:var(--gold)}
.timer{text-align:center;font-weight:bold;color:#facc15}

/* ===== LEADERBOARD ===== */
#leaderboard li{margin:6px 0}

/* ===== FOOTER ===== */
footer{background:#020617;padding:15px;text-align:center;color:#9ca3af;font-size:13px}
</style>
</head>

<body>

<!-- LOADING -->
<div id="loading">
  <img id="loadLogo" src="samuel.jpg">
  <div id="loadText">Loading 1%</div>
  <div id="bar"><div id="fill"></div></div>
</div>

<header>
  <h1>S.O.T Multimedia Concept</h1>
  <img src="logo.png">
</header>

<section class="hero">
  <h2>Bible Knowledge Challenge</h2>
  <p>
    S.O.T Multimedia Concept is a faith-based media ministry focused on
    radio presentation, studio broadcasting, and gospel communication.
    Take this quiz and be part of our media vision.
  </p>
  <button class="btn" onclick="openForm()">Start Quiz</button>
</section>

<section>
  <h2>üìª Radio Studio Gallery</h2>
  <div class="gallery">
    <img src="https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4">
    <img src="https://images.unsplash.com/photo-1521335629791-ce4aec67ddaf">
    <img src="https://images.unsplash.com/photo-1590608897129-79da98d15969">
  </div>
</section>

<!-- FORM -->
<div class="modal" id="formModal">
  <div class="card">
    <h3>Participant Registration</h3>
    <input id="fullName" placeholder="Full Name">
    <input id="phoneNumber" placeholder="Phone Number">
    <select id="genderSelect">
      <option value="">Select Gender</option>
      <option>Male</option>
      <option>Female</option>
    </select>
    <button class="btn" onclick="startQuiz()">Proceed</button>
  </div>
</div>

<!-- QUIZ -->
<section id="quiz">
  <div class="timer" id="timer"></div>
  <div class="progress"><div id="progFill"></div></div>
  <h3 id="qText"></h3>
  <div id="options"></div>
  <button class="btn" onclick="next()">Next</button>
</section>

<!-- RESULT -->
<section id="result" style="display:none;text-align:center">
  <h2>Thank You</h2>
  <p>
    We will get back to you as soon as our database calculates your result.
    Please come back next Sunday.
  </p>
  <h3>üèÜ Top Participants</h3>
  <ol id="leaderboard"></ol>
</section>

<footer>¬© 2026 S.O.T Multimedia Concept</footer>

<script>
/* ===== LOADING ===== */
let lp=1;
const loadInt=setInterval(()=>{
  lp++; fill.style.width=lp+"%"; loadText.textContent="Loading "+lp+"%";
  if(lp>=100){clearInterval(loadInt);loading.style.display="none";}
},25);

/* ===== QUESTIONS (60 REAL BIBLE QUESTIONS) ===== */
const questions = [
{q:"Who interpreted Pharaoh‚Äôs dreams?",o:["Daniel","Joseph","Moses","Aaron"],a:1,w:2},
{q:"Which prophet saw the valley of dry bones?",o:["Isaiah","Ezekiel","Jeremiah","Daniel"],a:1,w:2},
{q:"Who was Paul‚Äôs teacher?",o:["Peter","Barnabas","Gamaliel","Timothy"],a:2,w:2},
{q:"Which king saw handwriting on the wall?",o:["Nebuchadnezzar","Belshazzar","Darius","Cyrus"],a:1,w:2},
{q:"Who replaced Judas Iscariot?",o:["Silas","Matthias","Barnabas","Timothy"],a:1,w:2},
{q:"Who made a vow that cost his daughter?",o:["Samson","Jephthah","Saul","Gideon"],a:1,w:2},
{q:"Who rebuilt Jerusalem‚Äôs wall?",o:["Ezra","Nehemiah","Zerubbabel","Joshua"],a:1,w:2},
{q:"Who wrote most of Proverbs?",o:["David","Solomon","Hezekiah","Asaph"],a:1,w:2},
{q:"Which prophet married Gomer?",o:["Hosea","Amos","Joel","Micah"],a:0,w:2},
{q:"Who fell asleep during Paul‚Äôs sermon?",o:["Eutychus","Mark","Titus","Luke"],a:0,w:2},

/* EASY (20) */
{q:"Who built the ark?",o:["Moses","Noah","Abraham","Job"],a:1,w:1},
{q:"Jesus was born in?",o:["Nazareth","Bethlehem","Jerusalem","Rome"],a:1,w:1},
{q:"Who denied Jesus three times?",o:["John","Peter","James","Andrew"],a:1,w:1},
{q:"How many disciples did Jesus have?",o:["10","11","12","13"],a:2,w:1},
{q:"Who swallowed by a fish?",o:["Jonah","Elijah","Job","Daniel"],a:0,w:1},
];

/* ===== QUIZ LOGIC ===== */
let i=0,score=0,time=1800,active=false,picked=null,timerInt,cheated=false;

function openForm(){formModal.style.display="flex"}

function startQuiz(){
  if(!fullName.value||!phoneNumber.value||!genderSelect.value){
    alert("Fill all fields");return;
  }
  formModal.style.display="none";
  quiz.style.display="block";
  active=true;
  startTimer();
  showQ();
}

function startTimer(){
  timerInt=setInterval(()=>{
    time--;
    timer.textContent="Time left: "+Math.floor(time/60)+":"+String(time%60).padStart(2,"0");
    if(time<=0) finish();
  },1000);
}

function showQ(){
  const q=questions[i];
  qText.textContent=(i+1)+". "+q.q;
  options.innerHTML="";
  q.o.forEach((t,idx)=>{
    options.innerHTML+=`<div class="option" onclick="pick=${idx};">${t}</div>`;
  });
  progFill.style.width=((i/questions.length)*100)+"%";
}

function next(){
  if(picked===null){alert("Select an answer");return;}
  if(picked===questions[i].a) score+=questions[i].w;
  picked=null;i++;
  i>=questions.length?finish():showQ();
}

function finish(){
  clearInterval(timerInt);
  active=false;
  quiz.style.display="none";
  result.style.display="block";

  const max=questions.reduce((t,q)=>t+q.w,0);
  const percent=Math.round((score/max)*100);

  fetch("/api/send",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      name:fullName.value,
      phone:phoneNumber.value,
      gender:genderSelect.value,
      score,percent
    })
  });

  fetch("/api/leaderboard",{method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({name:fullName.value,percent})
  }).then(r=>r.json()).then(d=>{
    leaderboard.innerHTML="";
    d.forEach(p=>leaderboard.innerHTML+=`<li>${p.name} ‚Äì ${p.percent}%</li>`);
  });
}

/* ===== ANTI-CHEAT ===== */
document.addEventListener("visibilitychange",()=>{
  if(active && document.hidden && !cheated){
    cheated=true;
    score=Math.max(score-2,0);
    alert("Tab switch detected. Score penalty applied.");
  }
});
</script>

</body>
</html>
