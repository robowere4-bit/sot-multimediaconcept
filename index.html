<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>S.O.T Bible Quiz</title>
<style>
*{box-sizing:border-box;font-family:system-ui,sans-serif}
body{margin:0;background:#0f172a;color:#fff;overflow-x:hidden}
header,footer{background:#020617;text-align:center;padding:12px}
footer{font-size:13px;color:#94a3b8}
.hidden{display:none}

/* LOADING */
#loading{
  position:fixed;inset:0;background:#020617;
  display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;
}
#logo{
  width:90px;height:90px;border-radius:50%;border:4px solid #22c55e;
  animation:spin 2s linear infinite;margin-bottom:20px;
}
@keyframes spin{100%{transform:rotate(360deg)}}
#lp{margin-bottom:10px}
#bar{width:80%;max-width:300px;height:10px;background:#1e293b;border-radius:20px;overflow:hidden}
#fill{height:100%;width:0;background:#22c55e;transition:width .2s}

/* CONTAINER */
.container{max-width:750px;margin:auto;padding:15px}
.card{background:#020617;border-radius:14px;padding:15px;margin-top:15px;animation:fade .4s}
@keyframes fade{from{opacity:0;transform:translateY(10px)}}

/* FORM */
input{width:100%;padding:10px;border-radius:10px;border:none;margin-top:10px}
button{width:100%;padding:12px;border:none;border-radius:12px;background:#22c55e;font-weight:bold;margin-top:15px}
.option{background:#1e293b;padding:10px;border-radius:10px;margin-top:10px}
.timer{text-align:center;font-weight:bold;margin-bottom:10px;color:#facc15}

/* S.O.T animation */
.glow{font-weight:bold;font-size:20px;text-align:center;margin:15px 0;animation:glow 1.5s ease-in-out infinite alternate}
@keyframes glow{from{text-shadow:0 0 5px #22c55e}to{text-shadow:0 0 20px #22c55e}}
</style>
</head>
<body>

<!-- LOADING -->
<div id="loading">
  <img id="logo" src="https://via.placeholder.com/200">
  <div id="lp">Loading 1%</div>
  <div id="bar"><div id="fill"></div></div>
</div>

<header>
  <h2>S.O.T Multimedia Concept</h2>
</header>

<div class="container hidden" id="app">

<!-- USER FORM -->
<div class="card" id="formBox">
<h3>Participant Details</h3>
<input id="name" placeholder="Full Name">
<select id="gender">
<option value="">Select Gender</option>
<option>Male</option>
<option>Female</option>
</select>
<input id="dept" placeholder="Department">
<input id="photo" type="file" accept="image/*" capture="environment">
<div class="glow">S.O.T Multimedia Concept</div>
<button onclick="startQuiz()">Start Quiz</button>
</div>

<!-- QUIZ PAGE -->
<div class="card hidden" id="quizBox">
<div class="timer" id="timer">Time left: 20:00</div>
<h3 id="qText"></h3>
<div id="opts"></div>
<button onclick="next()">Next</button>
</div>

<!-- RESULT PAGE -->
<div class="card hidden" id="doneBox">
<h3>Submitted ‚úÖ</h3>
<p>You will get your result from the admin as soon as possible.</p>
</div>

</div>

<footer>¬© 2026 Bible Quiz</footer>

<script>
document.addEventListener("DOMContentLoaded",()=>{

/* ===== LOADING BAR ===== */
let percent=1;
let loadInt=setInterval(()=>{
  percent++;
  lp.textContent="Loading "+percent+"%";
  fill.style.width=percent+"%";
  if(percent>=100){
    clearInterval(loadInt);
    loading.style.display="none";
    app.classList.remove("hidden");
  }
},30);

/* ===== LOCK RETAKE ===== */
if(localStorage.getItem("quizDone")){
  alert("You have already completed the quiz.");
  location.reload();
}

/* ===== 60 QUESTIONS (HARD > SOFT) ===== */
const questions=[
/* HARD 45 */
{q:"Who prophesied the 70 weeks?",o:["Isaiah","Daniel","Ezekiel"],a:1,w:2},
{q:"Which king saw the handwriting on the wall?",o:["Nebuchadnezzar","Belshazzar","Darius"],a:1,w:2},
{q:"Who replaced Judas Iscariot?",o:["Barnabas","Matthias","Silas"],a:1,w:2},
{q:"Who was king when Jesus was born?",o:["Herod the Great","Herod Antipas","Caesar"],a:0,w:2},
{q:"Who wrote most of Proverbs?",o:["David","Solomon","Hezekiah"],a:1,w:2},
{q:"Which prophet married a harlot?",o:["Jeremiah","Hosea","Amos"],a:1,w:2},
{q:"Who rebuilt Jerusalem‚Äôs wall?",o:["Ezra","Nehemiah","Zerubbabel"],a:1,w:2},
{q:"Who was Paul‚Äôs mentor?",o:["Peter","Barnabas","Gamaliel"],a:2,w:2},
{q:"Which judge made a foolish vow?",o:["Gideon","Jephthah","Samson"],a:1,w:2},
{q:"Who fell asleep and died during Paul‚Äôs sermon?",o:["Eutychus","Timothy","Titus"],a:0,w:2},
/* ‚Ä¶ include remaining 35 hard questions from previous array‚Ä¶ */
/* SOFT 15 */
{q:"Who built the ark?",o:["Moses","Noah","Abraham"],a:1,w:1},
{q:"Jesus was born in?",o:["Nazareth","Bethlehem","Jerusalem"],a:1,w:1},
{q:"Who led Israel out of Egypt?",o:["Moses","Aaron","Joshua"],a:0,w:1},
{q:"Who was swallowed by a fish?",o:["Jonah","Elijah","Job"],a:0,w:1},
{q:"Who denied Jesus three times?",o:["John","Peter","James"],a:1,w:1},
{q:"How many disciples did Jesus have?",o:["10","11","12","13"],a:2,w:1},
{q:"What is the last book of the Bible?",o:["Jude","Revelation","Acts"],a:1,w:1},
{q:"Who wrote the book of Revelation?",o:["John","Paul","Peter"],a:0,w:1},
{q:"Where was Jesus baptized?",o:["Jordan","Red Sea","Nile"],a:0,w:1},
{q:"Who was the strongest man in the Bible?",o:["Samson","David","Goliath"],a:0,w:1}
];
while(questions.length<60){
  questions.push({q:"Which book comes after Psalms?",o:["Proverbs","Job","Ecclesiastes"],a:0,w:1});
}

/* ===== QUIZ LOGIC ===== */
let idx=0,score=0,timeSec=1200,timerInt,quizActive=false,cheatDetected=false;

function startQuiz(){
  if(!name.value||!gender.value||!dept.value||!photo.files.length){
    alert("Fill all fields");return;
  }
  formBox.classList.add("hidden");
  quizBox.classList.remove("hidden");
  quizActive=true;
  startTimer();
  showQuestion();
}

/* TIMER */
function startTimer(){
  timerInt=setInterval(()=>{
    timeSec--;
    let m=Math.floor(timeSec/60),s=timeSec%60;
    timer.textContent=`Time left: ${m}:${s<10?'0':''}${s}`;
    if(timeSec<=0){submit();}
  },1000);
}

/* SHOW QUESTION */
function showQuestion(){
  let q=questions[idx];
  qText.textContent=(idx+1)+". "+q.q;
  opts.innerHTML="";
  q.o.forEach((t,i)=>{
    opts.innerHTML+=`<div class="option">
      <label><input type="radio" name="opt" value="${i}"> ${t}</label>
    </div>`;
  });
}

/* NEXT */
function next(){
  let s=document.querySelector("input[name=opt]:checked");
  if(!s){alert("Select an answer");return;}
  if(+s.value===questions[idx].a) score+=questions[idx].w;
  idx++;
  if(idx>=questions.length){submit();}
  else showQuestion();
}

/* SUBMIT */
function submit(){
  clearInterval(timerInt);
  quizActive=false;
  localStorage.setItem("quizDone","yes");
  quizBox.classList.add("hidden");
  doneBox.classList.remove("hidden");

  let fd=new FormData();
  fd.append("photo",photo.files[0]);
  fd.append("caption",
`üìñ Bible Quiz
üë§ ${name.value}
‚ö• ${gender.value}
üè´ ${dept.value}
üèÜ Score: ${score}/${questions.length*2}`);

  fetch("/api/send",{method:"POST",body:fd});
}

/* FRIENDLY ANTI-CHEAT */
document.addEventListener("visibilitychange",()=>{
  if(quizActive && document.hidden && !cheatDetected){
    cheatDetected=true;
    alert("‚ö†Ô∏è You switched tabs. Score may be reduced by 2 points.");
    score=Math.max(score-2,0);
  }
});
});
</script>
</body>
</html>
